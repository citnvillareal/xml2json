<html>
<head>
	<title>Regex</title>
</head>
<body>
	<div id="result"></div>
	<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="xml2json.js"></script>
	<script type="text/javascript">

		var xmlString = '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">\
							<tests><test>hahaha</test><test>hahaha1</test></tests>\
							<hahaha>\
						 </soap:Envelope>\
						 <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">\
						    <soap:Body>\
						        <ns2:getWatchListDetailsResponse xmlns:ns2="http://test.com/">\
						            <getWatchListDetailsMsg>\
						                <code>0</code>\
						                <message>Success.</message>\
						                <individualWatchlistDetails watchListId="5912">\
						                    <title>Programmer</title>\
						                    <profileRefNumber>V000000444</profileRefNumber>\
						                    <employer>Arcelor Mittal</employer>\
						                    <startDate>Immediately</startDate>\
						                    <jobLocation>Indianapolis,United States</jobLocation>\
						                    <vacancyStatus>Published</vacancyStatus>\
						                    <addedTowatchlistDate>17.08.2015</addedTowatchlistDate>\
						                    <companyId>52643</companyId>\
						                    <vacancyId>444</vacancyId>\
						                </individualWatchlistDetails>\
						                <individualWatchlistDetails>\
						                    <watchListId>5912</watchListId>\
						                    <title>Programmer</title>\
						                    <profileRefNumber>V000000444</profileRefNumber>\
						                    <employer>Arcelor Mittal</employer>\
						                    <startDate>Immediately</startDate>\
						                    <jobLocation>Indianapolis,United States</jobLocation>\
						                    <vacancyStatus>Published</vacancyStatus>\
						                    <addedTowatchlistDate>17.08.2015</addedTowatchlistDate>\
						                    <companyId>52643</companyId>\
						                    <vacancyId>444</vacancyId>\
						                </individualWatchlistDetails>\
						            </getWatchListDetailsMsg>\
						            <individualWatchlistDetails>\
						                    <watchListId>5912</watchListId>\
						                    <title>Programmer</title>\
						                    <profileRefNumber>V000000444</profileRefNumber>\
						                    <employer>Arcelor Mittal</employer>\
						                    <startDate>Immediately</startDate>\
						                    <jobLocation>Indianapolis,United States</jobLocation>\
						                    <vacancyStatus>Published</vacancyStatus>\
						                    <addedTowatchlistDate>17.08.2015</addedTowatchlistDate>\
						                    <companyId>52643</companyId>\
						                    <vacancyId>444</vacancyId>\
						                </individualWatchlistDetails>\
						        </ns2:getWatchListDetailsResponse>\
						    </soap:Body>\
						</soap:Envelope>';


		 $(document).ready(function(){

				var xmlParser = new xml2json({xml: xmlString});

				var JSON = JSON || {};
				JSON.stringify = JSON.stringify || function (obj) {
				    var t = typeof (obj);
				    if (t != "object" || obj === null) {
				        // simple data type
				        if (t == "string") obj = '"'+obj+'"';
				        return String(obj);
				    }
				    else {
				        // recurse array or object
				        var n, v, json = [], arr = (obj && obj.constructor == Array);
				        for (n in obj) {
				            v = obj[n]; t = typeof(v);
				            if (t == "string") v = '"'+v+'"';
				            else if (t == "object" && v !== null) v = JSON.stringify(v);
				            json.push((arr ? "" : '"' + n + '":') + String(v));
				        }
				        return (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
				    }
				};


				$("#result").text(JSON.stringify(xmlParser.toJSON()));
				console.log(xmlParser.get("individualWatchlistDetails"));
		 });
	</script>
</body>
</html>